import React from "react";
import { Link, useNavigate } from "react-router-dom";
import { useAuth } from "../context/AuthContext";
import logo from "../assets/logo.png";
import "../style/style.css";

const Navbar = () => {
  const { user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate("/");
  };

  return (
    <header className="navbar">
      <div className="navbar-inner">
        <div className="brand">
          <Link to="/" style={{ textDecoration: "none", color: "inherit", display: "flex", alignItems: "center", gap: "8px" }}>
            <span className="logo-name">Rapihin.ai</span>
          </Link>
        </div>
        <nav className="nav-links">
          <Link to="/">Home</Link>
          <Link to="/upload">Upload</Link>
          {user ? (
            <>
              <Link to="/history">History</Link>
              <span className="user-greeting">Hi, {user.full_name || user.email}</span>
              <button onClick={handleLogout} className="link-logout">
                Logout
              </button>
            </>
          ) : (
            <Link to="/login">Login</Link>
          )}
        </nav>
        <button className="settings-btn" aria-label="Settings">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M16.1667 12.5C16.0557 12.7513 16.0226 13.0302 16.0717 13.3006C16.1209 13.571 16.2501 13.8203 16.4417 14.0167L16.4917 14.0667C16.6361 14.211 16.7506 14.3825 16.8286 14.5712C16.9066 14.7599 16.9467 14.9621 16.9467 15.1667C16.9467 15.3712 16.9066 15.5734 16.8286 15.7621C16.7506 15.9508 16.6361 16.1223 16.4917 16.2667C16.3473 16.411 16.1758 16.5256 15.9871 16.6036C15.7984 16.6815 15.5962 16.7217 15.3917 16.7217C15.1871 16.7217 14.9849 16.6815 14.7962 16.6036C14.6075 16.5256 14.436 16.411 14.2917 16.2667L14.2417 16.2167C14.0453 16.0251 13.796 15.8959 13.5255 15.8467C13.2551 15.7976 12.9762 15.8307 12.725 15.9417C12.4782 16.0476 12.2674 16.2239 12.1184 16.4493C11.9694 16.6747 11.8888 16.9395 11.8867 17.21V17.5C11.8867 17.9142 11.7221 18.3118 11.4283 18.6057C11.1344 18.8996 10.7368 19.0642 10.3225 19.0642C9.90828 19.0642 9.51067 18.8996 9.21686 18.6057C8.92304 18.3118 8.75837 17.9142 8.75837 17.5V17.425C8.75075 17.1463 8.66141 16.8755 8.50084 16.6467C8.34027 16.4179 8.11574 16.2412 7.85503 16.1383C7.60387 16.0273 7.32497 15.9942 7.05453 16.0434C6.78408 16.0925 6.53481 16.2217 6.33837 16.4133L6.28837 16.4633C6.14399 16.6077 5.97252 16.7223 5.78382 16.8003C5.59512 16.8783 5.39293 16.9184 5.18837 16.9184C4.9838 16.9184 4.78161 16.8783 4.59291 16.8003C4.40421 16.7223 4.23274 16.6077 4.08837 16.4633C3.94393 16.319 3.82937 16.1475 3.75139 15.9588C3.67342 15.7701 3.63327 15.5679 3.63327 15.3633C3.63327 15.1588 3.67342 14.9566 3.75139 14.7679C3.82937 14.5792 3.94393 14.4077 4.08837 14.2633L4.13837 14.2133C4.32996 14.0169 4.45912 13.7676 4.50827 13.4972C4.55742 13.2268 4.52429 12.9479 4.41337 12.6967C4.30747 12.4499 4.13119 12.2391 3.9058 12.0901C3.6804 11.9411 3.41558 11.8605 3.14503 11.8583H2.82253C2.40828 11.8583 2.01067 11.6937 1.71686 11.3999C1.42304 11.1061 1.25837 10.7084 1.25837 10.2942C1.25837 9.87995 1.42304 9.48233 1.71686 9.18852C2.01067 8.89471 2.40828 8.73004 2.82253 8.73004H2.89753C3.17629 8.72242 3.44707 8.63308 3.67587 8.47251C3.90467 8.31194 4.08138 8.08741 4.18503 7.8267C4.29595 7.57554 4.32908 7.29664 4.27993 7.0262C4.23078 6.75575 4.10162 6.50648 3.91003 6.31004L3.86003 6.26004C3.71559 6.11566 3.60103 5.94419 3.52306 5.75549C3.44508 5.56679 3.40493 5.3646 3.40493 5.16004C3.40493 4.95547 3.44508 4.75328 3.52306 4.56458C3.60103 4.37588 3.71559 4.20441 3.86003 4.06004C4.0044 3.9156 4.17587 3.80104 4.36457 3.72306C4.55327 3.64509 4.75546 3.60493 4.96003 3.60493C5.1646 3.60493 5.36679 3.64509 5.55549 3.72306C5.74419 3.80104 5.91566 3.9156 6.06003 4.06004L6.11003 4.11004C6.30647 4.30163 6.55574 4.43079 6.82619 4.47994C7.09663 4.52909 7.37553 4.49596 7.62669 4.38504H7.72253C7.96934 4.27914 8.18011 4.10285 8.32911 3.87746C8.4781 3.65207 8.5587 3.38725 8.56087 3.1167V2.79419C8.56087 2.37995 8.72553 1.98233 9.01935 1.68852C9.31316 1.39471 9.71078 1.23004 10.125 1.23004C10.5393 1.23004 10.9369 1.39471 11.2307 1.68852C11.5245 1.98233 11.6892 2.37995 11.6892 2.79419V2.8692C11.6914 3.13975 11.772 3.40457 11.921 3.62996C12.07 3.85535 12.2807 4.03164 12.5275 4.13754C12.7787 4.24846 13.0576 4.28159 13.328 4.23244C13.5985 4.18329 13.8478 4.05413 14.0442 3.86254L14.0942 3.81254C14.2386 3.6681 14.4101 3.55354 14.5988 3.47556C14.7874 3.39759 14.9896 3.35743 15.1942 3.35743C15.3988 3.35743 15.601 3.39759 15.7897 3.47556C15.9784 3.55354 16.1498 3.6681 16.2942 3.81254C16.4387 3.95691 16.5532 4.12838 16.6312 4.31708C16.7092 4.50578 16.7493 4.70797 16.7493 4.91254C16.7493 5.11711 16.7092 5.3193 16.6312 5.508C16.5532 5.6967 16.4387 5.86817 16.2942 6.01254L16.2442 6.06254C16.0526 6.25898 15.9235 6.50825 15.8743 6.77869C15.8252 7.04914 15.8583 7.32804 15.9692 7.5792V7.67504C16.0751 7.92185 16.2514 8.13262 16.4768 8.28161C16.7022 8.43061 16.967 8.51121 17.2375 8.51337H17.56C17.9743 8.51337 18.3719 8.67804 18.6657 8.97186C18.9595 9.26567 19.1242 9.66329 19.1242 10.0775C19.1242 10.4918 18.9595 10.8894 18.6657 11.1832C18.3719 11.477 17.9743 11.6417 17.56 11.6417H17.485C17.2144 11.6438 16.9496 11.7244 16.7242 11.8734C16.4988 12.0224 16.3225 12.2332 16.2167 12.48V12.5Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
        </button>
      </div>
    </header>
  );
};

export default Navbar;
